<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="Native ES2015 module browser support can&#39;t come soon enough."><meta property="og:type" content="article"><meta property="og:title" content="Misadventures in Bundling Modules"><meta property="og:url" content="https://modethirteen.com/2017/10/16/misadventures-in-bundling-modules/index.html"><meta property="og:site_name" content="al&#x3D;0x13"><meta property="og:description" content="Native ES2015 module browser support can&#39;t come soon enough."><meta property="og:locale" content="en_US"><meta property="og:image" content="https://modethirteen.com/2017/10/16/misadventures-in-bundling-modules/0_51ak67whYuVXrn1G.jpg"><meta property="article:published_time" content="2017-10-17T03:39:18.000Z"><meta property="article:modified_time" content="2020-12-04T05:21:53.550Z"><meta property="article:author" content="James Andrew Vaughn (Andy)"><meta property="article:tag" content="Programming"><meta property="article:tag" content="JavaScript"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://modethirteen.com/2017/10/16/misadventures-in-bundling-modules/0_51ak67whYuVXrn1G.jpg"><meta name="twitter:creator" content="@modethirteen"><link rel="shortcut icon" href="/images/favicon.ico"><link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><title>Misadventures in Bundling Modules</title><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/rtl.css"><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="al=0x13" type="application/atom+xml">
</head><body class="max-width mx-auto px3 ltr"><div id="header-post"><a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick='$("html, body").animate({scrollTop:0},"fast")' style="display:none"><i class="fas fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/about">About</a></li><li><a href="/archives">Posts</a></li><li><a href="/#projects">Projects</a></li><li><a href="/atom.xml">Atom</a></li><li><a href="/plan">.plan</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="/2018/04/07/introduction-to-the-chrome-devtools-protocol/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle()' onmouseout='$("#i-prev").toggle()'></i></a></li><li><a class="icon" href="/2017/08/15/walmart-labs-women-in-tech-hackathon/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle()' onmouseout='$("#i-next").toggle()'></i></a></li><li><a class="icon" href="#" onclick='$("html, body").animate({scrollTop:0},"fast")'><i class="fas fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle()' onmouseout='$("#i-top").toggle()'></i></a></li><li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle()' onmouseout='$("#i-share").toggle()' onclick='return $("#share").toggle(),!1'></i></a></li></ul><span id="i-prev" class="info" style="display:none">Previous post</span> <span id="i-next" class="info" style="display:none">Next post</span> <span id="i-top" class="info" style="display:none">Back to top</span> <span id="i-share" class="info" style="display:none">Share post</span></span><br><div id="share" style="display:none"><ul><li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://modethirteen.com/2017/10/16/misadventures-in-bundling-modules/"><i class="fab fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://modethirteen.com/2017/10/16/misadventures-in-bundling-modules/&text=Misadventures in Bundling Modules"><i class="fab fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://modethirteen.com/2017/10/16/misadventures-in-bundling-modules/&title=Misadventures in Bundling Modules"><i class="fab fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://modethirteen.com/2017/10/16/misadventures-in-bundling-modules/&is_video=false&description=Misadventures in Bundling Modules"><i class="fab fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=Misadventures in Bundling Modules&body=Check out this article: https://modethirteen.com/2017/10/16/misadventures-in-bundling-modules/"><i class="fas fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://modethirteen.com/2017/10/16/misadventures-in-bundling-modules/&title=Misadventures in Bundling Modules"><i class="fab fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://modethirteen.com/2017/10/16/misadventures-in-bundling-modules/&title=Misadventures in Bundling Modules"><i class="fab fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://modethirteen.com/2017/10/16/misadventures-in-bundling-modules/&title=Misadventures in Bundling Modules"><i class="fab fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://modethirteen.com/2017/10/16/misadventures-in-bundling-modules/&title=Misadventures in Bundling Modules"><i class="fab fa-digg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://modethirteen.com/2017/10/16/misadventures-in-bundling-modules/&name=Misadventures in Bundling Modules&description="><i class="fab fa-tumblr" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://modethirteen.com/2017/10/16/misadventures-in-bundling-modules/&t=Misadventures in Bundling Modules"><i class="fab fa-hacker-news" aria-hidden="true"></i></a></li></ul></div><div id="toc"></div></span></div><div class="content index py4"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">Misadventures in Bundling Modules</h1><div class="meta"><span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">James Andrew Vaughn (Andy)</span></span><div class="postdate"><time datetime="2017-10-17T03:39:18.000Z" itemprop="datePublished">2017-10-16</time></div><div class="article-tag"><i class="fas fa-tag"></i> <a class="tag-link-link" href="/tags/JavaScript/" rel="tag">JavaScript</a>, <a class="tag-link-link" href="/tags/Programming/" rel="tag">Programming</a></div></div></header><div class="content" itemprop="articleBody"><p class="description">Native ES2015 module browser support can&#39;t come soon enough.</p><p><img src="/2017/10/16/misadventures-in-bundling-modules/0_51ak67whYuVXrn1G.jpg" alt="Image"><span class="caption">Image: <a target="_blank" rel="noopener" href="https://unsplash.com/@cebbbinghaus">Christopher Robin Ebbinghaus</a></span></p><p>If you are writing modular JavaScript source code using ES2015’s import keyword, you are likely transpiling your code so that it can execute in web browsers presently available to most users. As much as it is a pleasure to maintain your source code as modules, it’s been a bumpy road to reach a common implementation of modules in the JavaScript execution environments themselves, resulting in a rather large and confusing set of technologies. The problem described later requires a bit of knowledge about the relationship between <a target="_blank" rel="noopener" href="https://github.com/umdjs/umd">UMD</a>, <a target="_blank" rel="noopener" href="http://requirejs.org/docs/whyamd.html">AMD</a>, and <a target="_blank" rel="noopener" href="http://requirejs.org/">Require.JS</a>. <a target="_blank" rel="noopener" href="http://davidbcalhoun.com/2014/what-is-amd-commonjs-and-umd">This post</a> by David Calhoun gives a great overview.</p><p><a target="_blank" rel="noopener" href="https://success.mindtouch.com/Integrations/Touchpoints">An embeddable widget library</a>, that our team develops and maintains, bundles the source JavaScript to simplify delivery to developers and integrators who rely on the library to embed in their websites. We didn’t notice that we had bundled them using UMD (Universal Module Definition) syntax. This led to problems when the library was added web applications leveraging the AMD syntax, like those depending on Require.JS. Transpiling to UMD included <code>window.require</code> as part of our bundle, leading to conflicts with the DOM’s <code>window.require</code> defined by the AMD-powered web application.</p><p>We corrected our mistake by transpiling to a global format. A word of caution: be careful when transpiling module syntax as there are many options for the target output. If you don’t have control over the webpage in which your code will execute (such as the case of an embeddable widget library), it’s wise to consider plain-old globals.</p></div></article><div id="footer-post-container"><div id="footer-post"><div id="nav-footer" style="display:none"><ul><li><a href="/">Home</a></li><li><a href="/about">About</a></li><li><a href="/archives">Posts</a></li><li><a href="/#projects">Projects</a></li><li><a href="/atom.xml">Atom</a></li><li><a href="/plan">.plan</a></li></ul></div><div id="toc-footer" style="display:none"></div><div id="share-footer" style="display:none"><ul><li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://modethirteen.com/2017/10/16/misadventures-in-bundling-modules/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://modethirteen.com/2017/10/16/misadventures-in-bundling-modules/&text=Misadventures in Bundling Modules"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://modethirteen.com/2017/10/16/misadventures-in-bundling-modules/&title=Misadventures in Bundling Modules"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://modethirteen.com/2017/10/16/misadventures-in-bundling-modules/&is_video=false&description=Misadventures in Bundling Modules"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=Misadventures in Bundling Modules&body=Check out this article: https://modethirteen.com/2017/10/16/misadventures-in-bundling-modules/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://modethirteen.com/2017/10/16/misadventures-in-bundling-modules/&title=Misadventures in Bundling Modules"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://modethirteen.com/2017/10/16/misadventures-in-bundling-modules/&title=Misadventures in Bundling Modules"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://modethirteen.com/2017/10/16/misadventures-in-bundling-modules/&title=Misadventures in Bundling Modules"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://modethirteen.com/2017/10/16/misadventures-in-bundling-modules/&title=Misadventures in Bundling Modules"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://modethirteen.com/2017/10/16/misadventures-in-bundling-modules/&name=Misadventures in Bundling Modules&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://modethirteen.com/2017/10/16/misadventures-in-bundling-modules/&t=Misadventures in Bundling Modules"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li></ul></div><div id="actions-footer"><a id="menu" class="icon" href="#" onclick='return $("#nav-footer").toggle(),!1'><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a> <a id="toc" class="icon" href="#" onclick='return $("#toc-footer").toggle(),!1'><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a> <a id="share" class="icon" href="#" onclick='return $("#share-footer").toggle(),!1'><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a> <a id="top" style="display:none" class="icon" href="#" onclick='$("html, body").animate({scrollTop:0},"fast")'><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></div></div></div><footer id="footer"><div class="footer-left">Copyright &copy; 2014-2021 James Andrew Vaughn (Andy)</div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/about">About</a></li><li><a href="/archives">Posts</a></li><li><a href="/#projects">Projects</a></li><li><a href="/atom.xml">Atom</a></li><li><a href="/plan">.plan</a></li></ul></nav></div></footer></div><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css"><script src="/lib/jquery/jquery.min.js"></script><script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script><script src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript">$((function(){$(".highlight table").before('<span class="btn-copy tooltipped tooltipped-sw" aria-label="Copy to clipboard!"><i class="far fa-clone"></i></span>'),new ClipboardJS(".btn-copy",{text:function(e){return Array.from(e.nextElementSibling.querySelectorAll(".code")).reduce((e,t)=>e+t.innerText+"\n","")}}).on("success",(function(e){e.trigger.setAttribute("aria-label","Copied!"),e.clearSelection()}))}))</script><script src="/js/main.js"></script></body></html>